# Marketing Field Mapping (Simplified Core)

## Основные стандартные поля Bitrix24

| Слой модели | Поле | Источник данных | Как заполняем | Назначение |
| --- | --- | --- | --- | --- |
| Категория канала | `SOURCE_ID` | Автоматизации и ручной выбор менеджера | Используем встроенный список `ADVERTISING/WEB/PARTNER/RECOMMENDATION/EMAIL/CALL/OTHER`. | Верхнеуровневая категоризация для стандартных отчётов и фильтров. |
| Тип трафика | `UTM_MEDIUM` | Веб-формы, UIS, автоскрипты | Принимать значение из URL или автологики, далее роботы нормализуют категорию. | Позволяет отличать платный/органический/соцканал без кастомного списка. |
| Конкретный источник | `UTM_SOURCE` | Веб-формы, UIS webhook | Передаём оригинальное значение (google_ads, instagram_oleynik, napopravku). | Сохраняет идентификатор площадки для ROI и назначения. |
| Кампания и детализация | `UTM_CAMPAIGN`, `UTM_CONTENT`, `UTM_TERM` | Веб-формы и импорт | Принимаем строковые значения без дополнительной нормализации. | Дополнительный срез по кампаниям, объявлениям и ключевым словам. |

## Минимальные дополнительные поля

| Поле | Тип | Зачем оставляем | Комментарий |
| --- | --- | --- | --- |
| `UF_CRM_CONTACT_METHOD` | Список | Фиксирует фактический канал коммуникации (звонок, WhatsApp, Instagram и т.д.), без него невозможно отделить «как обратились». | Поле уже используется в сделках и лидах, достаточно актуализировать значения и спрятать излишние для менеджеров. |
| `UF_SOURCE_DESCRIPTION` *(опционально)* | Текст | Автоматически собирает читабельное описание источника для аналитиков и проверок. | Если нужна максимальная простота, можно сгенерировать значение в отчётах и оставить поле скрытым. |

## Как маппить каналы при упрощённой модели

1. В веб-формах сохраняем текущий JavaScript для заполнения `utm_*` параметров и направляем их в стандартные поля вместо пользовательских.
2. UIS вебхуки заполняют `UTM_SOURCE/UTM_MEDIUM` и номер канала; автоматизация продолжает нормализовать `SOURCE_ID` и, при необходимости, подставляет способ обращения в `UF_CRM_CONTACT_METHOD`.
3. Роботы распределения ответственных могут читать `UTM_SOURCE`/`UTM_CAMPAIGN` и при необходимости обновлять `UF_SOURCE_DESCRIPTION` для аналитиков.
# Marketing Field Mapping

| Уровень маркетинга / сценарий | Поле в Bitrix24 | Источник данных | Нормализация / справочник | Назначение |
| --- | --- | --- | --- | --- |
| Категория канала | `SOURCE_ID` | CRM формы, UIS webhook, омниканальные каналы | Используем стандартный список Bitrix24: `ADVERTISING`, `WEB`, `PARTNER`, `RECOMMENDATION`, `EMAIL`, `CALL`, `OTHER` | Верхнеуровневая категоризация для базовых отчётов и стандартных фильтров. |
| Тип канала (как привлекли) | `UF_CRM_UTM_MEDIUM` (list) | UTM с сайта, UIS (строковое `UIS_UTM_MEDIUM`), ручные источники | Преобразовать к справочнику `cpc`, `organic`, `referral`, `social`, `email`, `direct`, `offline`, `other`. Заполняется роботами и веб-формами. | Нормализованный медиум для сквозной аналитики и триггеров автоматизации. |
| Конкретный источник (откуда) | `UF_CRM_UIS_UTM_SOURCE` (string) → при необходимости дублировать в `UF_CRM_UTM_SOURCE` | UIS webhook, скрытые поля форм, импорт | Хранить оригинальное текстовое значение (google_ads, instagram_oleynik, napopravku и т.д.). Для исторических данных использовать `UIS_UTM_SOURCE`. | Идентификатор площадки/кампании для отчётов ROI и назначения ответственных. |
| Способ обращения | `UF_CRM_CONTACT_METHOD` (list) | UIS номера, ChatApp (Instagram/Telegram/VK/WhatsApp), веб-формы | Поддерживать единый список каналов/номеров: Call 8800, WA 1182, Instagram @doctor.oleynik, Формы и т.д. | Фиксирует фактический канал коммуникации, ключевое поле для атрибуции конверсий. |
| Кампания | `UF_CRM_UTM_CAMPAIGN` (string) + `UF_CRM_UIS_UTM_COMPAIGN` (string) | UTM из сайта, UIS | Принимаем как текст. Для новых данных используем корректное поле без опечатки, но учитываем текущий `UIS_UTM_COMPAIGN`. | Идентификатор кампании для распределения бюджета и ответственных. |
| Контент и ключевое слово | `UF_CRM_UTM_CONTENT`, `UF_CRM_UTM_TERM`, `UF_CRM_UIS_UTM_CONTENT`, `UF_CRM_UIS_UTM_REFERRER` | UTM с сайта, UIS | Хранить оригинальные значения. `UIS_UTM_REFERRER` дополнительно использовать для классификации органики/рефералов. | Аналитика объявлений и поисковых запросов, диагностика источников без UTM. |
| Посадочная страница / домен | `UF_LANDING_DOMAIN`, `UF_CRM_UIS_URL_PAGE`, `UF_CRM_UIS_DOMEN`, `UF_CRM_UIS_URL_DOMEN_REFERER` | UIS webhook, формы, offline импорт | Приводить домены к единому регистру, удалять параметры. | Разделение трафика по сайтам и лендингам, контроль корректности интеграций. |
| Ответственный за канал | `UF_RESPONSIBLE_CHANNEL` (list) | Роботы по источнику/кампании, ручное назначение | Единый справочник сотрудников (Синицын, Муратова, Разумова и т.д.). | Автоматическое распределение лидов/сделок по маркетинговым менеджерам. |
| Тип клиента | `UF_CLIENT_TYPE` (list) | Роботы повторных обращений, ручное подтверждение | Справочник: Новый, Повторный, Реактивированный. | Разрез по повторности, сегментация для ретеншн-активностей. |
| Служебные заметки | `UF_SOURCE_DESCRIPTION`, `UF_TRACKING_NOTES`, `UIS_*` диагностические поля | Автоматизация, ручные пометки | Свободный текст, заполняется скриптами/интеграциями. | Контекст для отладки и аналитики, скрывать от менеджеров при необходимости. |

